import{h,q as l,A as v,u as t,b as F,T as S}from"./index-CgidXTkF.js";const y="451db31a922095940b8a5b8b38177ad9";function D({onCitySelect:r}){const[d,o]=h(!1),[p,i]=h(""),[f,n]=h([]),w=(e,a)=>{let c;return function(...b){c&&clearTimeout(c),c=setTimeout(()=>e.apply(this,b),a)}},s=l(async e=>{if(e.length<2){n([]);return}try{const c=await(await fetch(`https://api.openweathermap.org/data/2.5/find?q=${e}&appid=${y}`)).json();c.list?n(c.list):n([])}catch(a){console.error("Error fetching cities:",a),n([])}},[y]),m=v(w(s,300)).current,g=l(e=>{const a=e.target.value;i(a),m(a)},[m]),N=l(e=>{r(e),o(!1),i(""),n([])},[r]),u=l(()=>{o(e=>!e),n([])},[]);return t("div",{className:"search-container",children:[t("input",{type:"text",value:p,placeholder:"Search for a city...",onClick:u,onChange:g,className:"search-input"}),d&&t("div",{className:"search-dropdown",children:[t("ul",{className:"search-dropdown-list",children:f.map(e=>t("li",{onClick:()=>N(e),className:"search-dropdown-item",children:[e.name,", ",e.sys.country]},e.id))}),f.length===0&&t("p",{className:"no-results",children:"No cities found"})]})]})}function T({day:r,highTemp:d,lowTemp:o,icon:p}){return t(F,{children:[t("h3",{className:"forecast-day",children:r}),t("img",{src:`https://openweathermap.org/img/wn/${p}@2x.png`,alt:"Weather icon",className:"forecast-icon"}),t("p",{className:"forecast-temp forecast-temp-high",children:["High: ",d]}),t("p",{className:"forecast-temp",children:["Low: ",o]})]})}function $(){const[r,d]=h(null),[o,p]=h([]),[i,f]=h(!0),[n,w]=h("C°"),s={key:"451db31a922095940b8a5b8b38177ad9",baseWeather:"https://api.openweathermap.org/data/2.5/weather",baseForecast:"https://api.openweathermap.org/data/2.5/forecast"},m=l(e=>{fetch(`${s.baseWeather}?q=${e}&units=metric&appid=${s.key}`).then(a=>{if(!a.ok)throw new Error("Network response was not ok "+a.statusText);return a.json()}).then(a=>{if(a.cod!==200)throw new Error(a.message);return d(a),fetch(`${s.baseForecast}?q=${e}&units=metric&appid=${s.key}`)}).then(a=>{if(!a.ok)throw new Error("Network response was not ok "+a.statusText);return a.json()}).then(a=>{if(a.cod!=="200")throw new Error(a.message);const c={},b=a.list.filter(k=>{const C=new Date(k.dt*1e3).toLocaleDateString();return c[C]?!1:(c[C]=!0,!0)});p(b)}).catch(a=>{console.error("Error fetching weather data:",a)})},[s.baseWeather,s.baseForecast,s.key]),g=l(e=>{m(e.name)},[m]),N=l(()=>{f(e=>!e)},[]),u=S(()=>e=>{if(i)w("C°");else{let a=Math.round(e*9/5+32).toString();return w("F°"),a+n}return i?e+n:""},[i,n]);return t("div",{children:[t("div",{className:"search-container",children:t(D,{onCitySelect:g})}),r?t("div",{className:"weather-card fade-in",children:[t("h2",{className:"city-name",children:r.name}),t("h1",{className:"temperature",children:u(Math.round(r.main.temp))}),t("p",{className:"weather-description",children:[r.weather[0].main," - ",r.weather[0].description]}),t("img",{src:`https://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png`,alt:r.weather[0].description,className:"weather-icon"}),t("button",{className:"unit-toggle",onClick:N,children:["Switch to ",i?"Fahrenheit":"Celsius"]})]}):t("p",{className:"text-center",children:"Search for a city to see weather information"}),o.length>0&&t("h3",{className:"forecast-title",children:"5-Day Forecast"}),t("div",{className:"forecast-container",children:o.map((e,a)=>t("div",{className:"forecast-card",children:t(T,{day:new Date(e.dt*1e3).toLocaleDateString("en-US",{weekday:"long"}),highTemp:u(Math.round(e.main.temp_max)),lowTemp:u(Math.round(e.main.temp_min)),icon:e.weather[0].icon})},a))})]})}function W(){return t("div",{className:"container",children:[t("header",{className:"app-header",children:[t("h1",{className:"app-title",children:"Weather Forecast"}),t("p",{className:"app-subtitle",children:"Get accurate weather forecasts for any location"})]}),t($,{})]})}export{W as default};
